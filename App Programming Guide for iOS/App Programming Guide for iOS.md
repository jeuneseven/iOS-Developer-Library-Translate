[App Programming Guide for iOS 原文链接](https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007072)  

# 关于iOS app的发布
app应该和iOS结合的更好，确保为用户提供最佳的用户体验。除了为你的app提供更好的设计以及交互界面，更好的用户体验还包含很多其他因素。用户在使用app的时候，期望它消耗的电量更少、更快以及更具有交互性。app应该为所有最新发布的iOS设备做适配。实现所有的新功能看起来不太可能，但是iOS将对此对你提供帮助。  

![](file:///Users/lizhankun/Library/Developer/Shared/Documentation/DocSets/com.apple.adc.documentation.iOS.docset/Contents/Resources/Documents/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Art/ios_pg_intro_2x.png)  

本文档所描述的核心行为能够让你的app更好的在iOS上运行。你可能不需要实现本文档当中提到的所有功能，但是你应该在你创建的所有项目当中都考虑这些功能。  

	注意：开发iOS app需要一台基于intel处理器的苹果机，并且需要安装iOS SDK。关于如何获取iOS SDK，请移步“iOS开发者中心”。

## 概览
当你准备将你的idea变成一个app的时候，你要知道，在系统和你的app之间是有交互发生的。
### app应该支持key功能
系统希望每个app都有一些固定的资源文件和配置数据，比如一个app的logo和关于app能够做什么的一些信息。Xcode为每个新工程都提供了信息文件，但是你在提交你的app之前必须要支持资源文件，并且确保你的工程的信息文件是正确的。  

	`相关章节：预期的app行为`

### app应该明确定义执行路径
从用户启动加载app，到用户将它退出，app应该明确定义执行路径。在一个app的生命周期内，它应该能从前台转换到后台执行，它应该可以被终止和重新加载，它还应该可以被暂时休眠。每次转换到一个新的状态时，app都应该有相应的转变。一个在前台的app几乎可以做所有的事情，但是在后台的app只能做有限的一些事。你应该使用状态转换来调整你的app的响应的行为。  

	`相关章节：app生命周期，控制app状态转换策略`

### app必须高效的运行在一个多任务处理环境下
电池寿命、性能、快速响应一集极佳的用户体验对用户来说都是非常重要的。最小化你的app的耗电量能够让用户全天使用你的app而无需给设备充电，不过加载和运行的速度也是非常重要的。iOS多任务处理为用户期待的良好的电量消耗提供了支持，而这无需牺牲快速响应和用户体验，不过这需要app采用一些系统提供的行为。  

	`相关章节：后台执行，控制app状态转换策略`

### app之间的通信必须是遵循指定路径的
为了安全的需要，iOS app是运行在沙盒中的，并且限制了与其他app的交互。当你想与系统当中的其他app进行交互的时候，是有一些特殊方法可以做到的。  

	`相关章节：app之间的交互`

### 性能调试对于app来说是非常重要的
每个app执行的任务都是有相关的电量消耗的。app耗尽用户的电量为用户提供了非常不好的体验，并且相对于那些只需要充电一次就能够使用一整天的app来说，这种app更容易被删除。所以你要意识到不同操作的消耗以及利用好系统提供的节省电量的策略。  

	`相关章节：性能调试贴士`

## 如何使用本文档
本文档不是为iOS app开发入门者提供的。它是为那些想讲app发布到App Store之前，将app好好打磨的人提供的。使用本文档作为指南，理解你的app如何与系统进行交互，并且尽量让这些交互进行的流畅。  
## 预备知识
本文档为iOS app架构提供了相关的详细信息，为你展示了如何实现app级别的功能。我们假设你已经安装了iOS SDK，配置好了你的开发环境以及理解一些通过Xcode创建和实现你的app的知识。  
如果你是一个iOS app开发的新手，推荐阅读“开始开发iOS app（Swift）”。该文档提供了一步一步快速开发app的介绍。它还提供了从app创建到完成的亲身实践，为你展现了一个简单的app的创建以及快速运行。  
## 参考资料
如果你在学习关于iOS的知识，推荐阅读“iOS技术概览”来将相关的技术和功能加入到你的app当中。
# 预期的app行为
每个新建的Xcode项目都被配置好能够直接在模拟器或者设备上运行。但是在设备上能够运行不代表你已经准备好提交你的app到App Store了。每个app都应该进行大量的必需的配置，以便为用户带来更好的体验。定制化能够为从你的app使用的logo到架构级别的决定提供相关信息。本章讲述了所有app都应该关心的行为以及你应该尽早关心规划过程。  
## 提供所需的资源文件
每个你创建的app都应该拥有以下资源和元数据，以便能够在iOS设备上显示：  

* 一个信息属性列表文件。Info.plist文件包含了有关你的app的元数据，系统将会通过该文件与你的app进行交互。Xcode通过你的项目的配置和设置会自动为你生成该文件。如果你想直接查看或更改该文件的内容的话，你可以从你的工程的信息栏干这件事。关于如何更改该文件以及关于你应该包含的key的推荐，参见“信息属性列表文件”。  
* 一个app运行所需设备的声明。每个app都必须对于它运行所需要的硬件性能和功能进行声明。App Store会根据这项信息决定用户能否在指定的设备上运行你的app。你可以在你项目当中的信息栏中修改你的app运行所需的设备声明。关于如何配置这个key，参见“声明所需设备”。  
* 至少一个icon。系统将展示你的app的logo到用户的首页当中。系统也有可能将你的app的其他版本的icon展示在“设置”app或者搜索结果当中。关于如何展示app logo的相关信息，参见“app icon”。  
* 至少一个加载启动图。当一个app加载的时候，系统会展示一张临时的图片直到app能够展示在用户面前。这张临时图片就是你的app的加载图，它为用户提供了即时反馈，告诉用户，你的app正在加载，并且马上就准备好了。你必须为你的app至少提供一张加载图，此外，你还应该提供额外的加载图来处理特殊的场景。关于创建的你app的加载图的相关信息，参见“app加载图（默认启动图）”。

这些资源文件是所有app都必须要有的，但是你的app不仅仅要包含这些。你的app当中的Info.plist文件默认不包含很多的Xcode支持的key。很多很重要的key都是在你的app支持该功能的时候才需要添加的。举个例子，一个使用麦克风的app应该包含NSMicrophoneUsageDescription这个key，并且要提供给用户它为什么要使用麦克风的说明。
### app bundle

### 信息属性列表文件

### 声明所需的设备功能

### app icon

### app加载图（默认启动图）

## 支持用户隐私

## 国际化你的app

# app生命周期

## main函数

## app的结构

## 主运行循环

## app的执行状态

## app终止

## 多线程和并发性

# 后台执行

## 执行有限长度的任务

## 在后台下载内容

## 实现一直运行的任务

### 声明你的app支持后台任务

### 跟踪用户的位置

### 后台播放或录制音频

### 实现网络电话app

### 适时的获取小量的数据

### 使用推送来激活下载

### 在后台下载报刊内容

### 与外部的配件进行交互

### 与蓝牙配件进行交互

## 当在后台运行的时候应该提示用户

## 理解当你的app加载到后台的时候

## 做一个能够在后台响应的app

## 在后台运行之外的选择

# app状态转换策略控制

## 在加载的时候发生了什么？

### 加载循环

### 以水平模式加载

### 在第一次加载的时候，安装app指定的数据文件

## 当你的app被打断的时候，你应该做什么？

### 响应临时的打断

## 当你的app进入前台的时候，你应该做什么？

### 准备好处理消息队列

### 处理iCloud变更

### 处理地理位置变更

### 处理app设置变更

## 当你的app进入到后台的时候，你应该做什么？

### 后台转换循环

### 为app快照做准备

### 减少你的内存占用

# 实现定制的app功能策略

## 隐私策略

### 使用磁盘加密来保护数据

### 你app的用户唯一ID

## 考虑限制条件

## 支持多个iOS版本

## 通过启动图保存你的app的界面

### 在你的app当中授权状态保留和恢复

### 保存和恢复的过程

### 在你排除一组VC的时候，发生了什么？

### 实现状态保留和恢复的核对表

### 在你的app当中授权状态保留和恢复

### 保存你的VC的状态

### 保存你的视图的状态

### 保存你的app的高水平的状态

### 保存和恢复状态信息的一些小贴示

## 开发网络电话app的一些小贴示

### 使用Reachability接口来提高用户体验

# app内部通讯

## 支持AirDrop

### 发送文件和数据给其他的app

### 接收发送给你的app的文件和数据

## 与app之间使用URL Schemes进行通信

### 给其他的app发送URL

### 实现自定义的URL Schemes

### 当一个URL打开的时候，展示一个自定义的加载图

# 性能调试提示

## 减少你的app的电源消耗

## 高效的使用内存

### 检测低内存警告

### 减少你的app的内存占用

### 精致的分配你的内存

## 调整你的网络层代码

### 有效率的网络层贴士

### 使用Wi-Fi

### 飞行模式警告

## 改善你的文件管理

## 更高效的使用app备份

### app备份最佳实践

### 在app升级期间保存文件

## 清理主线程的工作