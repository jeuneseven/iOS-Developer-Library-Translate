[Programming with Objective-C 原文链接](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011210)

# 关于OC
在为OS X和iOS编写软件时，OC是一门主要使用的编程语言。这是一个C语言的超集，提供面向对象的功能以及动态运行时能力。OC继承了C语言的语法、原始数据类型以及流控制语句，并且添加了典型的类和方法语法。它还为对象的管理提供了语言级别的支持，并且在动态类型绑定时提供了对象字面量，将很多职责推迟到了运行时。
## 概览
本文档对于OC语言进行了介绍，并且提供了大量的使用示例。你将会学到如何生成你自己的类来描述自定义的对象以及看到如何使用Cocoa和Cocoa Touch层提供的框架来工作。尽管这些框架是与语言本身分离的，但是在使用OC编码时，还是紧密相关的，并且这些框架的类提供了很多语言层级的功能。
## 一款app是由网络对象构成的
当为OS X或iOS编写app时，你会花费大量的时间在对象上。这些对象是OC中类的实例，它们中的一部分是由Cocoa和Cocoa Touch提供的，还有一部分是由你自己创建的。  
如果你自己写类的话，应该从描述一个打算公开的有实例变量的类开始。这个接口包含了公共的属性来封装相关的数据，还有一些方法。方法声明了一个对象能够接收的消息，并且包含了当该方法被调用时需要传递的参数信息。你还应该实现这个类，包含头文件中你声明的每个方法。  
`相关章节：定义类、使用对象、封装数据`
## 分类扩展已经存在的类
你如果想为一个已经存在的类扩展一个小功能的话，你无需创建一个全新的类，你可以为这个类定义一个分类来添加自定义的行为。你可以使用分类为任何类添加方法，甚至包括你没有源代码实现的类，例如框架类中的NSString。  
如果你拥有一个类的源代码的话，你可以使用类的延展来添加新的属性，或者修改已经存在的属性。类的延展通常用来隐藏私有的行为，无论是在一个单独的源代码文件中还是在一个私有的自定义framework实现中。  
`相关章节：自定义已经存在的类`

## 协议定义了信息的契约形式
一个OC的app的主要工作就是以对象之间互相发送消息的形式出现。通常来讲这些消息由类的头文件中明确定义的方法来定义。然而有时候定义一些不直接绑定在一个特定类中的相关方法也是常有的。  
OC使用协议来定义一组相关的方法，例如方法由一个对象的delegate调起，代理方法有选定或者必须的。任何类都可以声明它遵守了一个协议，这意味着它必须实现所有在协议中要求的必须实现的方法。  
`相关章节：使用协议`

## 值和集合类通常表现为OC的对象
通常在OC中使用Cocoa或Cocoa Touch的类来表达一个值。NSString类表达一组字符串，NSNumber类是为多种不同类型的数字准备的，例如整形或者浮点型，NSValue类为各种C结构的类准备的。你还可以使用各种由C语言定义的原始数据类型，例如int，float或者char。  
集合通常表现为一种集合类的实例，例如NSArray, NSSet, 或者NSDictionary，这些通常用在收集其他OC对象上。  
`相关章节：值和集合`

## Block简化了常用任务
Block是一个语言级别的功能，C、OC以及C++当中都引入了该功能，它代表了一组工作集合；它将一块代码连同捕获的状态进行封装，这很像。其他编程语言当中的闭包功能。block通常用来简化日常的任务，例如集合的枚举、排序和测试等。它还简化了为并行或者异步执行的设计的GCD的预定任务。  
`相关章节：使用Block`

## error对象通常用来解决运行时问题
尽管OC为异常捕获提供了语法，Cocoa和Cocoa Touch通常仅仅在编程的错误中（例如数组越界）使用异常，这一般在app发布前就解决了。  
所有其他的错误，包含运行时问题，例如运行在非磁盘空间或者无网状态，这些都包含在NSError类的实例中。你的app必须为错误做好准备，以最佳的方式处理这些错误，当错误发生的时候，你最好给用户提供最佳的体验。  
`相关章节：处理error`

## OC代码服从既定惯例
当编写OC代码的时候，你应该时刻记住一些既定的编码惯例。例如方法名应该使用小写字母开头，使用驼峰命名法；例如，doSomething 和 doSomethingElse。当然，不只是大小写那么简单，你要确保你的代码尽可能的可读性，意思是你的方法名尽量更具有丰富性，而不是冗长啰嗦。  
此外，还有一些惯例需要注意，如果你想用好这门语言或者它的类库功能的话。例如，属性的存取器方法，必须严格执行命名规范，以便更好的配合KVC（键值编码）或者KVO（键值监听）使用。  
`相关章节：惯例`

## 预备知识
如果你是个OS X或者iOS开发新手的话，你应该在看本文档之前先阅读《从今天开始开发iOS app》或者《从今天开始开发Mac app》，这样可以对iOS和OS X的开发过程有一个大致的了解。此外，你应该比较熟悉Xcode，这样你在练习本文档每个章节后面的练习时会比较顺手。Xcode是用来开发iOS和OS X的IDE；你在写代码，设计你app的用户界面，测试你的app以及debug问题的时候会用到它。  
尽管如果你比较熟悉C或者基于C的语言例如java或者C#的话会比较好，但是本文档已经包含了一些示例，这些示例是基于C语言的，例如流控制语句等。如果你了解其他更高层级的编程语言，例如Ruby或者Python，你应该能够跟上进度。  
尽管在面向对象设计原则上已经有了合理的覆盖，特别是应用在OC上下文中，但是我们假设你已经对于面向对象的概念已经有了一些基本的了解。如果你对于这些概念不了解的话，你应该阅读《OC编程语言概念》相关的章节。
## 另请参阅
本文档应用在Xcode4.4及更高版本上，并且假设你的OS X版本是不低于10.7的，iOS版本不低于5.更多关于Xcode的信息，参阅Xcode用户指南。更多关于语言功能的介绍，参见OC功能索引。  
OC的app使用引用计数功能来决定对象的生命周期。大部分情况下编译器的ARC（自动引用计数）功能会为你处理好一切。如果你不使用ARC的话，或者需要维持一些比较旧的使用手动管理内存的代码，你应该阅读高级内存管理编程指南。  
除了编译器之外，OC语言使用了运行时系统来提供动态类型和面向对象功能。尽管你无需关心OC代码是如何运行的，但是还是应该尽可能的深入了解下运行时系统，这些在OC运行时编程指南和OC运行时参考中都有所介绍。

# 定义类
当你编写OS X和iOS的软件时，大部分时间你都会和对象打交道。OC当中的对象和其他面向对象编程语言中的对象是类似的：封装数据、关联行为。  
一个app是基于一组生态和一堆相互关联相互调用解决问题的对象来构建的，比如我要展示一个可视界面，响应用户的输入，或者存储信息。对于OS X或者iOS开发而言，你无需从头构建解决可能遇到的问题的对象；cocoa（为OS X提供）和cocoa touch（为iOS提供）已经为你构建了一大堆类库和存在的对象供你调用。  
这些对象当中的一部分可以立即使用，例如基本数据类型像字符串，数字这种，或者用户界面元素，像按钮，列表这种。还有一些可以根据你自己的需要去自己定制。软件开发过程其实就是如何将底层框架提供的对象与你自己定制的对象更好的结合，为你的app提供独一无二的功能的过程。  
在面向对象编程的关系中，对象是类的一个实例。本章阐述了如何在OC中通过声明接口定义一个类，接口描述了你的类打算做的事，以及实力对象要使用的事。这个接口包含了类能够接受的消息列表，你需要去提供类的实现，这包含响应每个消息的代码。  
## 类是对象的模板
类为各种类型的对象定义了通用的行为和属性。对于字符串对象来讲（OC中，这是个NSString类的实例对象），该类提供了多种方法去检验和转换它需要展示的内部的字符。同样的，一个用来展示数字对象的类（NSNumber）对其内部的数字值提供了函数，例如转换一个值到另一种不同类型的值。  
在结构上以同样的模板以同样的方式构建不同的结构这种方式是固定的，每个类的对象与该类其他的对象共享着同样的属性和行为。每个NSString类的实例对象的行为是一致的，不论它内部持有的字符串是否相同。是 
每个特殊的对象被设计用来做特殊的事情。你可能知道一个字符串对象表达一些字符串，但是你无需知道它内部的存储这些字符串的机制。你不知道任何字符串对象处理字符的内部行为，你只需知道如何使用这些字符串对象就可以了，可能你需要知道其中的某些特殊字符，或者请求一个新的对象用来将原来的对象转换成大写。  
在OC当中，类的接口指定了一个对象可以被其他对象调用的方式。换句话说，它定义了类的对象和外部环境的公共接口。  
## 可变性决定了一个表达的值是否能够被改变